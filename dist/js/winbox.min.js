/**
 * WinBox.js v0.2.82
 * Author and Copyright: Thomas Wilkerling
 * Licence: Apache-2.0
 * Hosted by Nextapps GmbH
 * https://github.com/nextapps-de/winbox
 */
(function(){'use strict';var e;function h(){this.l=!1;this.i=null;this.h=void 0;this.g=1;this.s=0;this.j=null}function k(b){if(b.l)throw new TypeError("Generator is already running");b.l=!0}h.prototype.m=function(b){this.h=b};function n(b,a){b.j={u:a,A:!0};b.g=b.s}h.prototype.return=function(b){this.j={return:b};this.g=this.s};function p(b,a,c){b.g=c;return{value:a}}function q(b){this.g=new h;this.h=b}
function t(b,a){k(b.g);var c=b.g.i;if(c)return u(b,"return"in c?c["return"]:function(d){return{value:d,done:!0}},a,b.g.return);b.g.return(a);return w(b)}function u(b,a,c,d){try{var f=a.call(b.g.i,c);if(!(f instanceof Object))throw new TypeError("Iterator result "+f+" is not an object");if(!f.done)return b.g.l=!1,f;var g=f.value}catch(m){return b.g.i=null,n(b.g,m),w(b)}b.g.i=null;d.call(b.g,g);return w(b)}
function w(b){for(;b.g.g;)try{var a=b.h(b.g);if(a)return b.g.l=!1,{value:a.value,done:!1}}catch(c){b.g.h=void 0,n(b.g,c)}b.g.l=!1;if(b.g.j){a=b.g.j;b.g.j=null;if(a.A)throw a.u;return{value:a.return,done:!0}}return{value:void 0,done:!0}}
function y(b){this.next=function(a){k(b.g);b.g.i?a=u(b,b.g.i.next,a,b.g.m):(b.g.m(a),a=w(b));return a};this.throw=function(a){k(b.g);b.g.i?a=u(b,b.g.i["throw"],a,b.g.m):(n(b.g,a),a=w(b));return a};this.return=function(a){return t(b,a)};this[Symbol.iterator]=function(){return this}}function z(b){function a(d){return b.next(d)}function c(d){return b.throw(d)}return new Promise(function(d,f){function g(m){m.done?d(m.value):Promise.resolve(m.value).then(a,c).then(g,f)}g(b.next())})}
function A(b){return z(new y(new q(b)))};function B(b,a,c){c=""+c;b["_s_"+a]!==c&&(b.style.setProperty(a,c),b["_s_"+a]=c)};/*
 self.max &&*/
var C=[],D=[],E=10,F;function G(b,a){if(!(this instanceof G))return new G(b);this.h={};this.h.C=b;this.h.B=a}G["new"]=function(b){return new G(b)};G.stack=function(){return D};function H(b,a,c){"string"===typeof b&&("center"===b?b=(a-c)/2+.5|0:"right"===b||"bottom"===b?b=a-c:(c=parseFloat(b),b="%"===(""+c!==b&&b.substring((""+c).length))?a/100*c+.5|0:c));return b}
function I(b){return A(function(a){if(1==a.g)return C.splice(C.indexOf(b),1),p(a,J(),2);b.removeClass("wb-minimized");b.min=!1;b.g.title="";a.g=0})}
function J(){var b,a,c,d,f,g,m,l,r,v;return A(function(x){switch(x.g){case 1:b=C.length;a={};c={};d=0;for(g=f=void 0;d<b;d++)f=C[d],g=f.left+":"+f.top,c[g]?c[g]++:(a[g]=0,c[g]=1);m=0;v=r=l=void 0;case 2:if(!(m<b)){x.g=0;break}l=C[m];r=l.left+":"+l.top;v=Math.min((NaN-l.left-l.right)/c[r],250);return p(x,l.resize(v+1|0,l.v,!0),5);case 5:return p(x,l.move(l.left+a[r]*v|0,NaN-l.bottom-l.v,!0),6);case 6:a[r]++,m++,x.g=2}})}e=G.prototype;
e.mount=function(b){this.unmount();b.o||(b.o=b.parentNode);this.body.textContent="";this.body.appendChild(b);return this};e.unmount=function(b){var a=this.body.firstChild;if(a){var c=b||a.o;c&&c.appendChild(a);a.o=b}return this};e.setTitle=function(b){var a=this.g.getElementsByClassName("wb-title")[0];b=this.title=b;var c=a.firstChild;c?c.nodeValue=b:a.textContent=b;return this};
e.setIcon=function(b){var a=this.g.getElementsByClassName("wb-icon")[0];B(a,"background-image","url("+b+")");B(a,"display","inline-block");return this};e.setBackground=function(b){B(this.g,"background",b);return this};e.setUrl=function(b,a){var c=this.body.firstChild;c&&"iframe"===c.tagName.toLowerCase()?c.src=b:(this.body.innerHTML='<iframe src="'+b+'"></iframe>',a&&(this.body.firstChild.onload=a));return this};
e.focus=function(b){var a=this,c,d,f;return A(function(g){switch(g.g){case 1:if(!1!==b){g.g=2;break}return p(g,a.blur(),3);case 3:return g.return(g.h);case 2:if(a.focused){g.g=4;break}c=D.length;if(!(1<c)){g.g=5;break}d=1;case 6:if(!(d<=c)){g.g=5;break}f=D[c-d];if(!f.focused){g.g=7;break}return p(g,f.blur(),10);case 10:D.push(D.splice(D.indexOf(a),1)[0]);g.g=5;break;case 7:d++;g.g=6;break;case 5:B(a.g,"z-index",++E);a.index=E;a.addClass("wb-focus");a.focused=!0;if(!a.onfocus){g.g=11;break}return p(g,
a.onfocus(),12);case 12:case 11:case 4:return g.return(a)}})};e.blur=function(b){var a=this;return A(function(c){switch(c.g){case 1:if(!1!==b){c.g=2;break}return p(c,a.focus(),3);case 3:return c.return(c.h);case 2:if(!a.focused){c.g=4;break}a.removeClass("wb-focus");a.focused=!1;if(!a.onblur){c.g=5;break}return p(c,a.onblur(),6);case 6:case 5:case 4:return c.return(a)}})};
e.hide=function(b){var a=this;return A(function(c){switch(c.g){case 1:if(!1!==b){c.g=2;break}return p(c,a.show(),3);case 3:return c.return(c.h);case 2:if(a.hidden){c.g=0;break}if(!a.onhide){c.g=5;break}return p(c,a.onhide(),6);case 6:case 5:return a.hidden=!0,c.return(a.addClass("wb-hidden"))}})};
e.show=function(b){var a=this;return A(function(c){switch(c.g){case 1:if(!1!==b){c.g=2;break}return p(c,a.hide(),3);case 3:return c.return(c.h);case 2:if(!a.hidden){c.g=0;break}if(!a.onshow){c.g=5;break}return p(c,a.onshow(),6);case 6:case 5:return a.hidden=!1,c.return(a.removeClass("wb-hidden"))}})};
e.minimize=function(b){var a=this;return A(function(c){switch(c.g){case 1:if(!1!==b){c.g=2;break}return p(c,a.restore(),3);case 3:return c.return(c.h);case 2:if(!F){c.g=4;break}return p(c,K(),4);case 4:a.max&&(a.removeClass("wb-maximized"),a.max=!1);if(a.min){c.g=6;break}C.push(a);return p(c,J(),7);case 7:a.g.title=a.title;a.addClass("wb-minimized");a.min=!0;if(!a.focused){c.g=8;break}return p(c,a.blur(),9);case 9:return p(c,L(),8);case 8:if(!a.onminimize){c.g=11;break}return p(c,a.onminimize(),12);
case 12:case 11:case 6:return c.return(a)}})};function L(){var b,a,c;return A(function(d){switch(d.g){case 1:b=D.length;if(!b){d.g=0;break}a=b-1;case 3:if(!(0<=a)){d.g=0;break}c=D[a];if(c.min){d.g=4;break}return p(d,c.focus(),7);case 7:d.g=0;break;case 4:a--,d.g=3}})}
e.restore=function(){var b=this;return A(function(a){switch(a.g){case 1:if(!F){a.g=2;break}return p(a,K(),2);case 2:if(!b.min){a.g=4;break}return p(a,I(b),5);case 5:return p(a,b.resize(),6);case 6:return p(a,b.move(),7);case 7:if(!b.onrestore){a.g=8;break}return p(a,b.onrestore(),9);case 9:case 8:case 4:if(!b.max){a.g=10;break}b.max=!1;b.removeClass("wb-maximized");return p(a,b.resize(),11);case 11:return p(a,b.move(),12);case 12:if(!b.onrestore){a.g=13;break}return p(a,b.onrestore(),14);case 14:case 13:case 10:return a.return(b)}})};
e.maximize=function(b){var a=this;return A(function(c){switch(c.g){case 1:if(!1!==b){c.g=2;break}return p(c,a.restore(),3);case 3:return c.return(c.h);case 2:if(!F){c.g=4;break}return p(c,K(),4);case 4:if(!a.min){c.g=6;break}return p(c,I(a),6);case 6:if(a.max){c.g=8;break}a.addClass("wb-maximized");return p(c,a.resize(NaN-a.left-a.right,NaN-a.top-a.bottom,!0),9);case 9:return p(c,a.move(a.left,a.top,!0),10);case 10:a.max=!0;if(!a.onmaximize){c.g=11;break}return p(c,a.onmaximize(),12);case 12:case 11:case 8:return c.return(a)}})};
e.fullscreen=function(b){var a=this,c;return A(function(d){switch(d.g){case 1:if(!a.min){d.g=2;break}return p(d,I(a),3);case 3:return p(d,a.resize(),4);case 4:return p(d,a.move(),2);case 2:if(c=!F){d.g=6;break}return p(d,K(),7);case 7:c=!d.h;case 6:if(c)return p(d,a.body[void 0](),12);if(!1!==b){d.g=9;break}return p(d,a.restore(),11);case 11:return d.return(d.h);case 12:F=a;a.full=!0;if(!a.onfullscreen){d.g=13;break}return p(d,a.onfullscreen(),14);case 14:case 13:case 9:return d.return(a)}})};
function K(){return A(function(b){return 1==b.g?(F.full=!1,document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement?b=p(b,document[void 0](),3):(b.g=0,b=void 0),b):b.return(!0)})}
e.close=function(b){var a=this,c;return A(function(d){switch(d.g){case 1:if(!(c=a.onclose)){d.g=2;break}return p(d,a.onclose(b),3);case 3:c=d.h;case 2:if(c)return d.return(!0);if(!a.min){d.g=4;break}return p(d,I(a),4);case 4:D.splice(D.indexOf(a),1);a.unmount();a.g.remove();a.g.textContent="";a.g.winbox=null;a.body=null;a.g=null;if(!a.focused){d.g=6;break}return p(d,L(),7);case 7:case 6:d.g=0}})};
e.move=function(b,a,c){var d=this;return A(function(f){return 1==f.g?(b||0===b?c||(d.x=b?b=H(b,NaN-d.left-d.right,d.width):0,d.y=a?a=H(a,NaN-d.top-d.bottom,d.height):0):(b=d.x,a=d.y),B(d.g,"left",b+"px"),B(d.g,"top",a+"px"),d.onmove?f=p(f,d.onmove(b,a),3):(f.g=2,f=void 0),f):f.return(d)})};
e.resize=function(b,a,c){var d=this;return A(function(f){return 1==f.g?(b||0===b?c||(d.width=b?b=H(b,d.j):0,d.height=a?a=H(a,d.i):0,b=Math.max(b,d.m),a=Math.max(a,d.l)):(b=d.width,a=d.height),B(d.g,"width",b+"px"),B(d.g,"height",a+"px"),d.onresize?f=p(f,d.onresize(b,a),3):(f.g=2,f=void 0),f):f.return(d)})};
e.addControl=function(b){var a=b["class"],c=b.image,d=b.click;b=b.index;var f=document.createElement("span"),g=this.g.getElementsByClassName("wb-control")[0],m=this;a&&(f.className=a);c&&B(f,"background-image","url("+c+")");d&&(f.onclick=function(l){var r=this;return A(function(v){return p(v,d.call(r,l,m),0)})});g.insertBefore(f,g.childNodes[b||0]);return this};e.removeControl=function(b){(b=this.g.getElementsByClassName(b)[0])&&b.remove();return this};
e.addClass=function(b){this.g.classList.add(b);return this};e.removeClass=function(b){this.g.classList.remove(b);return this};e.toggleClass=function(b){return this.g.classList.contains(b)?this.removeClass(b):this.addClass(b)};window.WinBox=G;}).call(this);
